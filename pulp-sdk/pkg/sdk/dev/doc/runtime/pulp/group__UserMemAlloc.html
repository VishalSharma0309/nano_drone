<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>User memory allocators</title>
<title>Runtime: User memory allocators</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="pulp.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="Pulp_logo_inline.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Runtime
   &#160;<span id="projectnumber">Version 1.0</span>
   </div>
   <div id="projectbrief">PULP Kernel Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__UserMemAlloc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">User memory allocators<div class="ingroups"><a class="el" href="group__groupKernel.html">Kernel</a> &raquo; <a class="el" href="group__MemAlloc.html">Memory allocators</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga79a0ca5f504e0a682ca7ef42930395bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__UserMemAlloc.html#ga79a0ca5f504e0a682ca7ef42930395bc">rt_user_alloc_init</a> (rt_alloc_t *alloc, void *chunk, int size)</td></tr>
<tr class="memdesc:ga79a0ca5f504e0a682ca7ef42930395bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a user memory allocator.  <a href="#ga79a0ca5f504e0a682ca7ef42930395bc">More...</a><br /></td></tr>
<tr class="separator:ga79a0ca5f504e0a682ca7ef42930395bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03a39ad38f8e02334f087a57b410ada7"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__UserMemAlloc.html#ga03a39ad38f8e02334f087a57b410ada7">rt_user_alloc</a> (rt_alloc_t *alloc, int size)</td></tr>
<tr class="memdesc:ga03a39ad38f8e02334f087a57b410ada7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate memory.  <a href="#ga03a39ad38f8e02334f087a57b410ada7">More...</a><br /></td></tr>
<tr class="separator:ga03a39ad38f8e02334f087a57b410ada7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49975b31e55b39868c63dbc27eb35acd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__UserMemAlloc.html#ga49975b31e55b39868c63dbc27eb35acd">rt_user_free</a> (rt_alloc_t *alloc, void *chunk, int size)</td></tr>
<tr class="memdesc:ga49975b31e55b39868c63dbc27eb35acd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free memory.  <a href="#ga49975b31e55b39868c63dbc27eb35acd">More...</a><br /></td></tr>
<tr class="separator:ga49975b31e55b39868c63dbc27eb35acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae88adbb7bbfd49c30cbfc77f26edbbed"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__UserMemAlloc.html#gae88adbb7bbfd49c30cbfc77f26edbbed">rt_user_alloc_align</a> (rt_alloc_t *alloc, int size, int align)</td></tr>
<tr class="memdesc:gae88adbb7bbfd49c30cbfc77f26edbbed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate aligned memory.  <a href="#gae88adbb7bbfd49c30cbfc77f26edbbed">More...</a><br /></td></tr>
<tr class="separator:gae88adbb7bbfd49c30cbfc77f26edbbed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9fa1bd7cfca4b616ec8551bc5105cfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__UserMemAlloc.html#gab9fa1bd7cfca4b616ec8551bc5105cfb">rt_user_alloc_info</a> (rt_alloc_t *alloc, int *size, void **first_chunk, int *nb_chunks)</td></tr>
<tr class="memdesc:gab9fa1bd7cfca4b616ec8551bc5105cfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return information about the allocator state.  <a href="#gab9fa1bd7cfca4b616ec8551bc5105cfb">More...</a><br /></td></tr>
<tr class="separator:gab9fa1bd7cfca4b616ec8551bc5105cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac7df5f9b6e027ee835374ab6aeb3e3c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__UserMemAlloc.html#gac7df5f9b6e027ee835374ab6aeb3e3c2">rt_user_alloc_dump</a> (rt_alloc_t *alloc)</td></tr>
<tr class="memdesc:gac7df5f9b6e027ee835374ab6aeb3e3c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump the state of the allocator.  <a href="#gac7df5f9b6e027ee835374ab6aeb3e3c2">More...</a><br /></td></tr>
<tr class="separator:gac7df5f9b6e027ee835374ab6aeb3e3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>These allocators are not the same as the usual malloc allocator. They require the caller to provide the size of the previously allocated chunk when it is freed, in order to decrease the amount of metadata that is stored. The allocator is using free memory to store metadata and thus the memory must be directly accessible to the runtime (e.g. this should not be flash addresses). </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga03a39ad38f8e02334f087a57b410ada7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03a39ad38f8e02334f087a57b410ada7">&#9670;&nbsp;</a></span>rt_user_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* rt_user_alloc </td>
          <td>(</td>
          <td class="paramtype">rt_alloc_t *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate the specified amount of bytes. Note that the allocated memory is at least aligned on 4 bytes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>A pointer to the memory allocator structure, which was also given when creating the allocator. </td></tr>
    <tr><td class="paramname">size</td><td>The size in bytes to be allocated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The allocated chunk or NULL if there was not enough memory. </dd></dl>

</div>
</div>
<a id="gae88adbb7bbfd49c30cbfc77f26edbbed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae88adbb7bbfd49c30cbfc77f26edbbed">&#9670;&nbsp;</a></span>rt_user_alloc_align()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* rt_user_alloc_align </td>
          <td>(</td>
          <td class="paramtype">rt_alloc_t *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>align</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate the specified amount of bytes with the specified alignment. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>A pointer to the memory allocator structure, which was also given when creating the allocator. </td></tr>
    <tr><td class="paramname">size</td><td>The size in bytes to be allocated. </td></tr>
    <tr><td class="paramname">align</td><td>The needed alignment in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The allocated chunk or NULL if there was not enough memory. </dd></dl>

</div>
</div>
<a id="gac7df5f9b6e027ee835374ab6aeb3e3c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac7df5f9b6e027ee835374ab6aeb3e3c2">&#9670;&nbsp;</a></span>rt_user_alloc_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_user_alloc_dump </td>
          <td>(</td>
          <td class="paramtype">rt_alloc_t *&#160;</td>
          <td class="paramname"><em>alloc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Useful for debugging memory corruptions which affects the memory allocator. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>A pointer to the memory allocator structure, which was also given when creating the allocator. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab9fa1bd7cfca4b616ec8551bc5105cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9fa1bd7cfca4b616ec8551bc5105cfb">&#9670;&nbsp;</a></span>rt_user_alloc_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_user_alloc_info </td>
          <td>(</td>
          <td class="paramtype">rt_alloc_t *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>first_chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>nb_chunks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This can be useful in order to take over an existing allocator if it has only 1 free chunk. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>A pointer to the memory allocator structure, which was also given when creating the allocator. </td></tr>
    <tr><td class="paramname">size</td><td>Returns the remaining amount of memory in bytes. </td></tr>
    <tr><td class="paramname">first_chunk</td><td>Returns the start address of the first free chunk. </td></tr>
    <tr><td class="paramname">nb_chunks</td><td>Returns the number of free chunks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga79a0ca5f504e0a682ca7ef42930395bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79a0ca5f504e0a682ca7ef42930395bc">&#9670;&nbsp;</a></span>rt_user_alloc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_user_alloc_init </td>
          <td>(</td>
          <td class="paramtype">rt_alloc_t *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The memory allocator is created from the given chunk, and can then be immediately used to allocate memory. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>A pointer to the memory allocator structure, which must be allocated by the caller. </td></tr>
    <tr><td class="paramname">chunk</td><td>The start address of the memory chunk to be managed by this memory allocator. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the memory chunk to be managed by this memory allocator. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga49975b31e55b39868c63dbc27eb35acd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49975b31e55b39868c63dbc27eb35acd">&#9670;&nbsp;</a></span>rt_user_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_user_free </td>
          <td>(</td>
          <td class="paramtype">rt_alloc_t *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free the previously allocated chunk. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>A pointer to the memory allocator structure, which was also given when creating the allocator. </td></tr>
    <tr><td class="paramname">chunk</td><td>The memory chunk to be freed. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the memory chunk to be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 
	-->
	</li>
  </ul>
</div>
</body>
</html>
